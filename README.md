# ptp_simulation
自己写的ptp协议的仿真 加入了一个改进算法
# 改进算法流程：
每个节点维护一个与之相连的上一级的节点的信息列表 内容主要包括与该节点同步得到的t1 t2 t3 t4 通过该节点到GM的跳数hop
	GM节点的跳数值设置为0 其他所有节点初始化为一个很大的值
	GM向下一级广播自己到GM的跳数信息hop 下一级收到后将列表内对应值到GM的跳数hop值更新为收到的跳数+1
	对列表内的点来说，跳数越大 权重应该越小 因此按照1/hop进行加权
并更新自身等效HOP
1/HOP=∑1/(hop[i])
	与每一个上一级节点同步后都进行自身offset的更新
与原始算法不同的是 对offset乘上HOP/(hop[i])的权值

# 总结：
等效hop的求法类似于电阻值的并联 
理想情况下 对于任意复杂网络 从节点与GM之间的等效hop对于这两点之间的“电阻值”
但是本算法要略差于这一结果 因为要达到这一效果还需要通过下一级节点向上传递更新值 而这会带来类似于路由自环的问题  只有每一个节点都知道全局的拓扑信息解决这个问题
带来很复杂的算法   性能提升却很小
